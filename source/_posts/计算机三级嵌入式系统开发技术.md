---
title: 计算机三级嵌入式系统开发技术（持续更新中……）
author: ZERO JAN
avatar: 'https://cdn.jsdelivr.net/gh/FengYJ120/CDN/MyBlog/img/custom/avatar.jpg'
authorLink: 'https://www.zero-jan.xyz'
categories: 技术
tags: 学习笔记
description: 计算机三级嵌入式学习笔记
comments: ture
abbrlink: e738
photos: 'https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/计算机三级.jpeg'
date: 2021-01-30 22:36:34
---

## 第一章-嵌入式系统概论

### 考纲与考点分析

#### 嵌入式系统开发的基础知识
1. 嵌入式系统的特点、分类、发展与应用；
2. 嵌入式系统的组成与微电子技术 （集成电路、SoC、IP核等技术的作用和发展）；
3. 数字媒体基础（文本、图像和音频/视频等数字媒体的表示与处理）；
4. 网络通信技术（数字通信与计算机网络，TCP/IP协议，互联网接入技术等）。

#### 考点分析
- 在考试中一般情况下会出现在*选择题1~3（知识类型为理论型，需多记多背）*
- 常考知识点有：
  - 了解嵌入式系统的特点、分类、发展与应用，熟悉嵌入式系统的逻辑组成。
  - 了解嵌入式处理芯片的主要类型，熟悉SoC的开发流程，理解IP核的重要意义。
  - 熟悉中西文字的编码和数字文本的类型与处理，掌握数字图像的参数、文件格式及其主要应用。
  - 理解计算机网络的分类与组成，熟悉IP协议的主要内容，掌握互联网的组成和常用接入技术。

### 考点1 嵌入式系统及其应用

#### 什么是嵌入式系统？
- 嵌入式系统是嵌入式计算机系统的简称。顾名思义，它是一种嵌入在设备（或系统）内部，为**特定应用**而设计的专用计算机系统

#### 嵌入式系统的共同特点
1. **专用性**
   与具体应用紧密结合，具有很强的专用性
2. **隐蔽性**
   通常隐藏在内部，不为人知；例如：ATM柜员机、数码相机
3. **资源受限**
   软硬件资源受到严格限制
4. **高可靠性**
   对于汽车等中的嵌入式，任何误动作都是致命的
5. **实时性** 
   温控需要实时数据
6. **软件固化**
   ROM固化
   
#### 嵌入式系统的应用
1. 消费类应用产品
   1. **“白色家电”**
      冰箱、洗衣机、空调、微波炉、电饭煲、热水器等
   2. **数码产品**
      电视机、家庭影院、PDA、电子字典、游戏机、智能玩具等
2. 产业类应用产品
   1. **工业设备**
      数控机床、工业机器人、机电一体化设备、生产线控制等
   2. **运输工具**
      汽车、飞机、铁路机车、船舶、电梯等
   3. **医疗电子设备**
      X光机、B超（超声诊断仪）、CT（计算机断层成像系统）、心脏起搏器、监护仪
3. 业务类应用产品
   1. **办公设备**
      电话机、传真机、打印机、复印机等
   2. **金融电子设备**
      电子秤、POS（商用零售终端）、ATM（自动柜员机）、信息亭等
   3. **通信设备**
      手机、GPS导航仪、Moderm、路由器、Hub（集线器）、交换机、网桥等
4. 军用类应用产品
   1. **武器控制装置**    
      火炮、导弹、智能炸弹的制导引爆等     
   2. **军用电子装备**
      坦克、舰艇、战机、无人机等
   3. **军事通信装备**
      雷达、电子对抗、导航系统等

#### 嵌入式系统的发展意义
1. 嵌入式系统在应用数量上远远超过了各种类型的通用计算机系统。
2. 嵌入式系统正在逐步渗透到人类社会的各个领域，嵌入式应用构成了所谓“ **无所不在的计算时代** ”。
3. 嵌入式系统的研发能力及产业化水平已经成为衡量一个国家**经济发展**、**科技进步**和**国防实力**的重要标志 。

### 考点2 嵌入式系统的组成

#### 嵌入式系统的逻辑组成
1. 嵌入式系统与通用计算机一样，也是由**硬件**和**软件**两部分组成的。
2. 硬件的主体是**中央处理器**和**存储器**，它们通过**输入/输出(I/O)接口**和**输入/输出设备**与外部世界联系 ，并借助总线相互连接，这些硬件连同嵌入式软件一起构成完整的嵌入式系统。

#### 处理器的组成
1. 能按照指令的规定高速度完成二进制数据算术和逻辑运算的部件称为“处理器”
2. 它由**运算器**、**控制器**、**寄存器**、**高速缓冲存储器（Cache）**等部件组成，结构相当复杂。
3. 处理器的所有组成部分都可以制作在一块大小仅为几cm<sup>2</sup>的半导体芯片上。

#### 嵌入式系统中的处理器分类
1. **中央处理器（CPU）**
   负责运行系统软件和应用软件的主处理器
2. **协处理器**
   DSP（数字信号处理器）、图形处理器、通信处理器

#### 中央处理器（CPU）的参数
1. **字长**
   指的是CPU中通用寄存器和定点运算器的二进位宽度
2. **CPU字长**
   4位、8位、16位、32位和64位（通用计算机64位为主）
   - 说明：虽然32位和64位是当前技术发展的主流，但销量仅占全部微处理器的**10%左右**
3. **CPU性能**
   **表现为程序**（指令）执行速度的快慢

#### 中央处理器（CPU）特点
1. **支持实时处理**
2. **低功耗**
3. **结构可扩展**
4. **集成测试电路**

#### 影响程序（指令）执行速度的因素
- **主频**、**指令系统**、**Cache的容量与结构和逻辑结构**。

#### 存储器的分类
1. **易失性存储器**
   即掉电后信息丢失
   SARM（静态随机存取存储器）、DRAM（动态随机存取存储器）
2. **非易失性存储器**
   E<sup>2</sup>PROM（电可擦可编程只读存储器）、Falsh ROM、磁盘和光盘存储器
   - 说明：非易失性存储器有多种类型。以前使用较多的是Mask ROM和E<sup>2</sup>PROM，**目前使用较多是闪存**，即Falsh Memory。 
   - Mask ROM是基于掩膜工艺技术的只读存储器，一旦生产出来信息不可改变，主要用于**不可升级的成熟产品存储程序**或**不变的参数等信息**；
   - Falsh Memory是一种长寿命的非易失性存储器，是近些年应用最广的只读存储器。

#### I/O设备按其服务对象分类
1. 用于**人机交互**的设备
   键盘、鼠标、话筒、LED、LCD、打印机等，他们是用户界面的硬件部分。
2. 用于**机机交互**的设备
   包括各种类型的传感器（压力传感器、电流电压传感器等）
   和各种伺服执行机构（继电器、微电机、步进电机等）

#### I/O接口的分类
1. 按数据传输速率
   **低速**和**高速**
2. 按数据传输方式
   **串行**和**并行**
3. 按是否需要物理连接
   **有线**和**无线**
4. 按是否能连接多个设备
   **总线式**和**独占式**

#### 嵌入式系统常用的I/O接口
1. **通用串行总线式接口**
   USB2.0/USB3.0、IEEE 1394、以太网接口
2. **异步串行接口**
   RS-232-C、RS-485
3. **视频信号接口**
   VGA接口（视频图形排列接口）、DVI接口（数字视频接口）、HDMI接口（高清晰度多媒体接口）
4. **工业总线接口**
   CAN接口（控制器局域网接口）、1553B接口、LIN接口（局域互联网接口）
5. **无线接口**
   IrDR接口（红外线接口）、Bluetooth接口（蓝牙接口）、ZigBee接口、WiFi接口

#### 数据总线的概念
- 数据总线简称**总线**，它是嵌入式系统各组件之间**进行数据传输**的一个传输通路。它由传输线和控制电路组成，为连接在总线上的系统内或系统外的各个组件提供数据传输和相应的控制服务。 

#### 嵌入式系统的软件配置
1. 低端嵌入式系统
   软件很**简单**，它们不需要操作系统，只需配置一个监控程序、若干设备驱动程序和事件处理程序即可。
2. 高端嵌入式系统
   软件配置**比较复杂**。它通常由**板级支持包**（BSP）、**设备驱动程序**、**实时操作系统**、**中间件**以及**嵌入式应用软件**等组成。

#### 嵌入式处理芯片4种产品类型
1. **微处理器**
   根据CPU的字长，微处理器产品分为4位、8位、16位、32位和64位 ，产品主要有PowerPC、MC68000、MIPS、AMD、x86。
2. **数字信号处理器**
   DSP是一种专用于数字信号处理的微处理器，它对通用处理器的逻辑结构和指令系统进行了优化设计，使之能更好地**满足高速数字信号处理的要求**。
   ![image-20210131222114547](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210131222114547.png)
3. **微控制器（单片机）**
   微控制器实际上是一种将若干个功能模块集成在单个芯片中的小型计算机。
   它们的工作频率不高，存储容量较小，功耗很低；
   MCU按其使用的处理器内核的位数，也经历了**1位、4位、8位、16位以及32位**的发展阶段。
   早先的4位主要用于**家用电器的控制单元**，8位和16位用于**一般的控制领域**，近年来32位MCU迅速发展。
   MCU品种多，应用广泛，约占有嵌入式系统**70**%的市场。
4. **片上系统（SoC）**
   半导体加工工艺已经进入到深亚微米时代，能够把计算机或其他一些电子系统的全部电路都集成在单个芯片上，这种芯片就是所谓的片上系统。
   因此片上系统是集成电路加工工艺进入到**深亚微米时代的产物** 。
   目前，大多数高端嵌入式系统均采用 SoC（片上系统），例如：智能手机。
   - 说明：将嵌入式系统的几乎全部功能都集成在一块芯片中，单个芯片就能实现数据的采集、转换、存储、处理和输入/输出等多种功能。 

### 考点3 嵌入式系统的分类

#### 嵌入式系统的分类
1. 按用途分类
   **军用**、**工业用**和**民用**
2. 按实时性的分类
   **非实时系统**、**软实时系统**和**硬实时系统**
3. 按产品形态分类
   **系统级产品**、**板级产品**和**片级产品**
4. 按软硬件复杂程度分类
   **低端系统**、**中端系统**和**高端系统**

#### 不同类型嵌入式系统的比较
|   类型   |               硬件特征                |                           软件特征                           |                     应用举例                     |
| :------: | :-----------------------------------: | :----------------------------------------------------------: | :----------------------------------------------: |
| 低端系统 |           采用4位/8位单片机           |           不使用操作系统，由监控程序对系统进行控制           |    在**工控领域**和**白色家电**领域占主导地位    |
| 中端系统 |    采用8位/16位单片机或32位处理器     |  使用小型嵌入式操作系统，应用程序规模较小，用户界面比较简单  |   普通手机、摄像机、录像机、电视游戏机等（2G）   |
| 高端系统 | 采用32位/64位处理器，支持**连接网络** | 操作系统功能比较齐全，使用图形用户界面，应用软件可更新和扩展 | 智能手机、掌上计算机、路由器、气象数据处理设备等 |

<!-- ![image-20210202190127443](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210202190127443.png) -->

### 考点4 SoC芯片

#### 1、微电子技术

##### 集成电路以及制造
1. 微电子技术是以半导体集成电路为核心。根据所含电子元件的数目可以分为小规模、中规模、大规模和极大规模等几种。
   - 大规模集成电路（LSI）
     集成度在3000~**10万**个电子元件之间的集成电路。
   - 超大规模集成电路（VLSI）
     集成度在10万~**100万**个电子元件之间的集成电路。
   - 极大规模集成电路（ULSI）
     集成度**超过100万**个电子元件的集成电路。
2. 集成电路的制造**工艺复杂**且**技术难度非常高**，其中有一系列的关键技术。许多工序必须在恒温、恒湿、超洁净的**无尘厂房**内完成，生产、控制及测试**设备异常昂贵**。
3. 集成电路是在**硅衬底**上制作而成的。
4. 制造集成电路所用的工艺技术称为硅平面工艺，包括**氧化**、**光刻**、**掺杂**等多项工艺。

##### 集成电路的发展趋势
1. 集成电路的特点是**体积小**、**重量轻**、**可靠性高**；
2. 集成电路的工作速度主要取决于组成逻辑门电路的晶体管的尺寸。晶体管的**尺寸越小**，其极限工作频率越高， 门电路的开关**速度就越快**。
3. 芯片上电路元件的**线条越细**，相同面积的晶片可容纳的晶体管就越多，**功能就越强**，速度也越快。
4. 当前，世界上最为先进的制作工艺已经达到**12~14英寸晶圆**、**45nm或32nm**的工艺水平，并还在进一步提高。
5. 最复杂的CPU芯片所集成的晶体管数目已超过**10亿**个，移动设备存储卡所用的每个芯片包含的晶体管数量已达**100亿**个。
6. 目前，芯片中晶体管数目已达数十亿个，**时钟频率**达到10GHz （*不是工作频率*）

##### 微机电系统
- MEMS体现了近年来机电一体化技术向微型化的发展；
- 目前的MEMS产品有压力传感器、加速仪、陀螺仪、麦克风、微射流器件等许多种，它对促进产品小型化、智能化、集成化有重大的作用；
- **在智能手机中应用广泛。**

#### 2、通用SoC和专用SoC

##### 通用SoC
- 指半导体企业通过**自主开发处理器内核**或购买其他企业的处理器内核的**IP授权**，按照目标应用领域功能要求所开发的SoC芯片系列；
- 如：三星Exynos系列、英达伟Tegra系列、**高通骁龙系列**、**联发科MT系列**，这些芯片大多采用ARM公司的**Cortex-A架构**作为CPU内核。
- 说明： 通用的芯片中可以只有一个CPU（或DSP ），称为单核SoC，也可以包含多个CPU（或DSP ），称为多核SoC。

##### 专用SoC
- 嵌入式系统开发商依据待开发产品的特殊要求，向半导体企业定制的SoC芯片；
- 如：**苹果公司的iPhone**、iPad和iPod等消费电子产品。

#### 3、SoC芯片的开发流程
![image-20210201170247184](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210201170247184.png)
1. **总体设计**
   按照系统需求说明书确定*SoC的性能参数*，并据此进行系统全局的设计。
2. **逻辑设计**
   将总体设计的结果用*RTL语言*进行描述（源文件）后，再使用逻辑综合软件将源文件进行综合，生成最简的布尔表达式和信号的连接关系。
3. **综合仿真**
   这一阶段将对由RTL生成的各部分电路图作芯片电路*综合及仿真测试*。
4. **芯片制造**
   将经过验证后的逻辑电路配置入SoC芯片内，并与其他电路进行互连。

#### 4、IP核及其复用

##### IP核
1. 以库中所包含的IC设计文件按其**功能复杂程度**分为三类：
   - **逻辑门级**，包括各种基本的门电路；
   - **寄存器传输级**，如寄存器、多路选择器、译码器、数据转换器等；
   - **行为级**（又称为**功能级**），如CPU、DSP、存储器、总线与接口电路等。
2. 这些已完成的并经过验证的IC具有固定的不可再分解的功能特性，人们称之为“核”（Core），相应的数据库称为“核库”。
   - 核库中的设计文件均属于知识产权（IP）保护的范畴。
   - IP核分类： 软核、固核和硬核。（类比：砖、房间、一层楼）
- 从可重用的频度、重用的灵活性以及可向其他工艺**移植**的可能性的角度考虑，这三种IP核的优选次序是软核、固核和硬核； 
- 从保证满足所要求的性能和规范、上市时间短、**开发工作量少**且不在乎成本的角度考虑，这三种IP核的优选次序是 硬核、固核和软核。

##### IP核复用
1. SoC芯片的产生是半导体集成电路技术发展到一定阶段的产物，是集成电路芯片的跨越式发展；
2. IP核是开发SoC的重要保证，IP核复用可以**减少研发成本**，**缩短研发时间**；
3. 以CPU为例。**所有SoC芯片都包含CPU**，它们绝大多数都是**以IP核的方式**集成在SoC芯片中的，很少再自行设计开发；
4. 目前主要的CPU内核有：**ARM**、**MIPS**、PowerPC、Coldfire、x86、8051等；
5. ARM内核的授权内容包括：**芯片内核设计技术**、**完整的软件开发工具**（编译器、调试器、 软件开发套件SDK）、 含ARM CPU的**芯片销售权**等。

### 考点5 数字（电子）文本

#### 1、字符集及其编码
- 文本是基于特定字符集的一个字符流，每个字符均使用**二进制编码**表示。

##### 西文字符的编码
- 目前计算机中使用得最广泛的西文字符集及其编码是**ASCII字符集和ASCII码**，即美国标准信息交换码。
- 基本的ASCII字符集共有**128**个字符，包括**96**个可打印字符（常用的拉丁字母、阿拉伯数字、标点符号等）和**32**个控制字符，每个字符使用**7个二进制位**进行编码。 

##### 汉字的编码
- 我国目前广泛使用的汉字编码国家标准有**GB2312**和**GB18030**；
- GB2312只有**6763**个汉字，而且为**简体字**，在人名、地名的处理上经常不够使用。尤其是在古籍整理和研究方面有很大缺憾。
- GB2312国标字符集中包含3775个一级常用汉字和3008个二级常用汉字，此外还有682个图形符号（包括*拉丁字母、俄文、日文平假名与片假名、希腊字母、汉语拼音*等）。
- 我国在2005年又发布了GB18030中文编码国家标准。

##### UCS/Unicode编码
- 用于计算机**统一**处理、存储和传输包含世界各国和地区所有各种语言文字的需求；编码方案最常用的有两种：**UTF-8和UTF-16**。
- UTF-8采用的是**单字节**可变长编码，一般使用**3字节**编码，极少数使用4字节。
- UTF-16采用的是**双字节**可变长编码，一般使用**双字节**编码，其他不常用字符使用4字节。
- 说明：GB18030字符集与国际标准UCS/Unicode字符集**基本兼容**，但其码制不一样；GB18030与UCS/Unicode**均包含中日韩统一汉字**（CJK）约7万多个。

#### 2、文本的类型

##### 根据是否具有排版格式分类
1. **简单文本**
   几乎不包含任何其他的格式信息和结构信息，也称为纯文本，文件扩展名是**\.txt**；
2. **丰富格式文本**
   需要对纯文本进行必要的加工，也称为富文本，文件扩展名包括：**\.doc、\.html和\.pdf**。

##### 根据文本内容的组织方式分类
1. **线性文本**
   文本中的内容组织是**线性**（顺序）的，如简单文本。
2. **超文本**
   采用**网状结构**来组织信息，文本中的各个部分按照其内容的逻辑关系相互链接，如**WWW网页**是最为常见的超文本。。

#### 3、文本的制作与展现

##### 文本制作
- 文字处理软件：WPS、Microsoft Word等等。数字文本阅读器可以是软件，也可以是一种称为“电子书阅读器”的嵌入式应用产品。
- 2009年**PDF格式**被批准为我国用于**长期保存的电子文档格式的国家标准**。
- PDF（便携式文件格式）是由Adobe Systems在1993年用于文件交换所发展出的文件格式。它的优点在于跨平台、能保留文件原有格式（Layout）、开放标准，能免版税（Royalty-free）自由开发PDF相容软体，是一个开放标准，2007年12月成为ISO 32000国际标准。

##### 文本展现（阅读）
- 数字电子文本主要有两种展现方式：**打印输出**和在**屏幕上进行阅读。**
- 字符的形状有两种描述方法：**点阵法**和**轮廓法**。

### 考点6 数字图像
- 嵌入式系统中使用的数字图像也称为**取样图像**、**点阵图像**或**位图图像**。

#### 1、数字图像的获取与主要参数

##### 数字图像的获取所使用的设备及其功能
- 设备：**数码相机**和**扫描仪**。
- 功能：将实际景物的**2D映像**输入到计算机内并以数字图像的形式进行表示。

##### 数字图像的获取处理步骤
​	图像的获取过程的核心是**模拟信号的数字化**，处理步骤大体分为4步：
1. **扫描**
   扫描将画面划分为M x N个网格，每个网格称为一个取样点。*离散化*
2. **分色**
   将每个取样点的颜色分解成红、绿、蓝（R、G、B）3个基色，如果是灰度图像或黑白图像，则不必进行分色。
3. **取样**
   测量每个取样点的每个分量（基色）的*亮度值。*
4. **量化**
   对取样点每个分量的亮度值进行A/D转换，即把模拟量使用数字量（一般是8位至12位的正整数）来表示。

##### 数字图像的主要参数及其含义
- 图像大小
  也称为**图像分辨率**（用水平分辨率 x 垂直分辨率表示）。日常所说的高清图像分辨率为1920 x 1080；
- 位平面数目
  即像素颜色分量的数目。**黑白或灰度**图像只有一个位平面，**彩色图像**有**3个或更多**的位平面；
- 像素深度
  指每像素用多少个二进制位来表示。它是像素的**所有颜色分量的二进制位数之和**，它决定了图像中可能出现的不同颜色（或不同亮度）的最大数目。
  例如单色图像，若其像素深度是8位，则不同亮度等级的总数为2<sup>8</sup>=25；
- 颜色模型
  指彩色图像所使用的颜色描述方法。通常， **显示器使用的是RGB**( 红、绿、 蓝）模型， **彩色打印机使用的是CMYK**(青、品红、黄、黑）模型。

#### 2、数字图像常用文件格式及其应用

##### 一副图像的数据量计算公式_(以字节为单位)_
- **图像数据量 = 图像水平分辨率 x 图像垂直分辨率 x 像素深度 / 8**

##### 数据压缩的类型
1. **无损压缩**
   指使用压缩以后的数据还原图像（也称为解压缩）时，重建的图像与原始图像完全相同，没有一点误差。例如：行程长度编码（RLE）、哈夫曼编码。*压缩率不高*
2. **有损压缩**
   指使用压缩后的图像数据进行还原时，重建的图像与原始图像虽有一些误差，但不影响人们对图像含义的正确理解和使用。为了得到较高的数据压缩比，数字图像的压缩**一般都采用有损压缩**，如变换编码、矢量编码等。

##### 嵌入式系统常用的几种图像文件的格式
| 名称 |       压缩编码办法        |    性质    |      典型应用      | 开发公司（组织） |
| :--: | :-----------------------: | :--------: | :----------------: | :--------------: |
| **BMP**  |            RLE            |    无损    |  Windows应用程序   |    Microsoft     |
| TIF  |         RLE，LZW          |    无损    |      桌面出版      | Aldus，Microsoft |
| GIF  |            LZW            |    无损    |       互联网       |    CompuServe    |
| **JPEG** |      DCT，哈夫曼编码      | 大多为有损 | 互联网、数码相机等 |     ISO/IEC      |
| PNG  | LZ77派生的DEFLATE压缩算法 |    无损    | 互联网、桌面出版等 |       W3C        |

<!-- ![image-20210202185556478](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210202185556478.png) -->
- PNG属于静态图像格式

### 考点7 数字音频与数字视频
- 音频指的是人耳可听见的声音信号，视频泛指*活动图像序列*，它们都是传递信息的重要媒体。共同的特点是内容随时间而变化，所以也称为*动态媒体*。

#### 1、音频/视频信息的数字化
- 音频是频率范围为**20Hz~20kHz**的模拟信号。为了使用计算机进行处理，必须将它转换成二进制编码表示的形式， 这个过程称为声音信号的数字化。

##### 声音信号数字化的过程
- **取样**
  把时间上连续的声音信号离散为不连续的一系列的样本；
- **量化**
  把每个样本的模拟量转换成数字量来表示，因此量化过程往往也称为**A/D转换**；
- **编码**
  经过取样和量化得到的数据必须进行**数据压缩**，以**减少数据量**，并**按某种格式**将数据组织为**文件**，以便于计算机进行存储、处理和传输。

##### 视频信号数字化的过程
- 视频信号数字化的过程比声音复杂一些，它以一幅幅画面（称为**帧** ）为单位进行。

#### 2、数字音频常用文件格式及其应用

##### 数字音频的主要参数
- 数字音频的主要参数包括**取样频率**、**量化位数**、**声道数目**、**使用的压缩编码方法**以及**比特率**；
- 比特率也称为**码率**，它指的是**每秒钟的数据量**。

##### 数字音频**未压缩**前，码率的计算公式
**波形声音的码率=取样频率 x 量化位数 x 声道数（单位：b/s）**
*注意： 压缩编码后的码率则为压缩前的码率除以压缩倍数（压缩比）。* 

##### 常用的数字音频的文件格式、编码格式以及它们的主要应用
![image-20210202185644651](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210202185644651.png)

##### 数字视频压缩编码的国际标准及其应用
![image-20210202190048228](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210202190048228.png)

##### 数字视频及其伴音的文件格式
- 国际标准**MPEG**格式（ .dat、.mpg、.mpeg、**\.mp4**、.vob、**\.3gP**、.3g2等）。
- 微软公司的AVI（**\.avc**）和ASF（**\.asf**）格式（后者适合**流媒体应用**）。
- 苹果公司的QTFF格式（**\.mov**和.qt）。
- DivX公司的DivX（.divx）格式。
- Real Network公司的RM（**\.rm**）和RMVB（**\.rmvb**）格式（ .rmvb格式是.rm的扩充，它采用H.264/MPEG-4 AVC算法， 增加了可变码率编码的功能，性能优于DivX和Xvid目前互联网上许多视频都是RMVB格式）。
- Adobe公司的FLV（.flv）和F4V（**\.f4v**）格式以及开放源代码的Matroska格式（.mkv）等。
- 说明：**\.asf、\.wmv、\.mov、\.rm、\.rmvb、\.flv和\.f4v等均支持流式传输** ，能很好地在互联网上进行音频/视频流的实时传输和实时播放，满足互联网上视频直播、视频点播、视频会议等应用的需求，得到了广泛的应用。

### 考点8 数字通信

#### 1、模拟通信与数字通信

##### 通信的基本任务与三要素
- 通信的基本任务是**传递信息**，至少需由3个要素组成：信息的发送者（称为**信源**）、信息的接收者（称为**信宿**）和携带了信息的电（或光）信号以及信息的传输通道（称为**信道**）。

##### 通信系统中所传输的信息形式
- 通信系统中所传输的信息必须以**电（或光）信号**的形式才能通过传输介质进行传输。电（或光）信号有两种形式：**模拟信号**和**数字信号**
- 模拟信号：通过**连续变化的物理量**（如电平的长度或电流的强度）来表示信息，例如人们打电话或者播音员播音时，声音经话筒（麦克风）转换得到的电信号就是模拟信号；
- 数字信号：它的**电平高低**或电流大小只有**有限个状态**（一般是两个状态），它们在时间上有时也是不连续的。例如 电报机、传真机和计算机发出的信号都是数字信号
- 说明：由于模拟信号在传输过程中容**易受噪声信号的干扰**，所以**传输质量不稳定**。目前最常用的通信方式是数字通信技术，既把模拟信号转换成数字信号后再进行传输（或信源本身发出的就是数字信号）。数字通信的实例：**手机**通信、数字**有线电视**（或卫星电视）和固定电话中继通信（及**长途通信**）等。 

#### 2、有线与无线通信

##### 通信传输介质类型、特点和应用
- 有线通信中使用的传输介质是**金属导体**或**光导纤维**，金属导体利用电流传输信息，光导纤维通过光波来传输信息。
- 无线通信根本不需要物理连接，而是通过**电磁波**在自由空间的传播来传输信息。
![image-20210203192630244](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210203192630244.png)

##### 有线通信
- 通信中使用金属电缆（**双绞线和同轴电缆**）的历史已经很长，**技术相当成熟**；
- 目前光纤已经远超金属电缆的性能，光纤是**光导纤维**的简称，它由纤芯和包层组成，包层外有涂覆层，为光纤提 供物理保护，屏蔽外部光源的干扰；
- 光纤传输的优点：通信**容量大**、传输**距离远**、抗辐射能力强、**保密性强**以及重量轻便于运输和建设；

##### 无线通信
- 优点：允许终端设备在一定范围内**自由移动**；*灵活性好。*
- 缺点：传输效率低、**易被窃听和易受干扰**；*安全性差。*
- 按频率分类：中波、短波、超短波和微波等波段；
- 适用范围：**中波**主要沿地面传播，绕射能力强，适用于**广播**和海上通信。**短波**具有较强的电离层反射能力，适用于**环球通信**。超短波和**微波**的绕射能力较差，只能作为视距或超视距中继通信；*微波是数字通信的主流。*

##### 微波的应用实例
- 微波是一种**300MHz~300GHz**的电磁波，它具有**类似光波**的特性，在空间主要作**直线传播**（*视距传播*）。利用微波进行远距离通信时，需要依靠地面微波站进行**接力通信**，微波站的中继距离一般为**50Km**左右。微波通信的另一种途径是借助**人造卫星**进行接力通信，此时中继站就安装在通信卫星上，这种通信方式也称为**卫星通信**。
- **手机**是微波最有代表性的一种应用。
  - 第1代个人移动通信采用的是模拟传输技术；
  - 第2代，使用的频段扩至**900MHz到1800MHz**多年来我国广泛使用的GSM和CDMA都是第2代移动通信系统，俗称全球通移动通信系统，简称2G；
  - 第3代个人移动通信，3G的频谱利用率比2G高，使用的频段也成倍增长（1885\~2025MHz，2110\~2200MHz）因此数据传输能力比2G大幅度提高；
  - 第4代移动通信，4G传输速率可达100Mb/s 。中国移动采用TD-LTE制式，其4G手机将兼容3G（TD-SCDMA）和2G（GSM）模式；中国电信和联通采用FDD-LTE制式，其终端设备（手机、上网卡等）也采用多模工作方式，即分别与原先使用的3G和2G模式保持兼容；
  - 5G，发展中。

#### 3、数字通信的传输技术

##### 调制与解调技术
- 信息传输时，利用信源信号去调整（改变）载波的某个参数（幅度、频率或相位），这个过程称为**调制**；
- 经过调制后的载波携带着被传输的信号在信道中进行长距离传输；到达目的地时，接收方再把载波所携带的信号检 测出来恢复为原始信号的形式，这个过程称为**解调**。

##### 多路复用技术
为了提高传输线路的利用率，降低通信成本，一般总是让多路信号同时共用一条传输线进行传输；分为如下两种：
- **时分多路复用（TDM）**，技术中各通信终端（如电话机）以事先规定的顺序轮流使 用同一传输线路进行信号（或数据）传输。
- **频分多路复用（FDM）**，它将每个 信源发送的信号调制在不同频率的载波上， 通过多路复用器将它们复合成为一个信号，然后在 同一传输线路上进行传输。
  - **波分多路复用（WDM）**，它是频分多路复用技术的一种。

##### 交换技术
- **电路交换**的特点是：在通话的全部时间内用户始终占用端到端的传输信道。
  - *电话交换机*采用的是电路交换技术。即通话前经过拨号接通双方的线路（建立一条物理通路），通话后再释放（拆线）。
- **分组交换**的特点是：电路交换的使用效率太低，解决的方法是采用分组交换（也称包交换）。它的优点是大大**提高传输线路的利用率**；同时也存在缺点，产生额外开销。
  - *路由器*

### 考点9 计算机网络

#### 1、计算机网络的组成与类型

##### 计算机网络的概念
- 计算机网络是利用*通信设备*、*传输线路*和*网络软件*，把地理上分散的许多计算机及其他智能设备**以相互通信和共享资源为目的**连接起来的一个系统。它是一种**数据通信系统**。

##### 计算机网络的组成
- **计算机等智能电子设备**
  - 它是网络的**通信终端**，如手机、电视机顶盒、监控报警设备、厨房卫生设备等；
- **数据通信链路**
  - 用于数据传输的双绞线、同轴电缆、光缆，以及为了有效而可靠地传输数据所必需的各种通信控制设备（如网卡、集线器、交换机、调制解调器、路由器等），它们构成了计算机与通信设备、计算机与计算机之间的数据通信链路；*有限设备与无线设备*
- **通信协议**
  - 为确保网络的互联互通，计算机和通信控制设备必须**共同遵循一组规则和约定**，这些规则、约定或标准就称为通信协议，简称**协议**；
- **网络软件**
  - 通信软件的功能就是**实现网络通信协议**，它们一般都包含在操作系统中。还**包括网络应用**，如电子邮件程序、浏览器程序、即时通信软件、网络游戏软件等。

##### 计算机网络的类型
- 按使用的传输介质可分为有线网和无线网；
- 按网络的使用性质可分为公用网和专用网；
- 按网络的使用范围和使用对象可以分为企业网、政府网、金融网和校园网；
- 更多的情况下，人们按网络所覆盖的地域范围把计算机网络分为：
  - **广域网**（WAN）
    - 也称为远程网，网络的作用范围可以从几十到几千km甚至更大。广域网往往覆盖一个国家、地区，或横跨几个洲，形成国际性的计算机网络。
  - **城域网**（MAN）
    - 也称为市域网，其作用范围为5~50km。
  - **局域网**（LAN）
    - 网络的地域范围较小（如几km）通常是一幢楼房、一个楼群或一个小区局域网往往属于一个单位所有，由单位自建自管；
  - **个域网**（PAN）
    - 一般指个人域网。是指能在便携式消费电器与通信设备之间进行短距离通信的网络，其覆盖范围一般在10m半径以内。

#### 2、以太局域网

##### 以太局域网的概念
- **以太局域网**常见于公司、学校、机构和家庭，是计算机网络中最流行的一种形式，全世界估计有几百万个计算机局域网；现在流行的是使用交换机组成的交换式以太网。

##### 计算机局域网的主要特点
1. 为一个单位所拥有，**自建自管**，**地理范围有限**。
2. 使用**专门铺设的传输介质**进行联网和数据通信。*主要是双绞线*
3. 数据**传输速率高**（10Mb/s\~10Gb/s），**延迟时间短**，**误码率低**（10<sup>-8</sup>\~10<sup>-11</sup>）。

##### 局域网使用的数据交换技术与数据格式
|                 |                 |          |                        |          |
| :-------------: | :-------------: | :------: | :--------------------: | :------: |
| 发送设备MAC地址 | 接收设备MAC地址 | 控制信息 | 有效载荷（传输的数据） | 校验信息 |

##### 局域网的划分
- 按照它所使用的**传输介质**
  - 有线网和无线网；
- 按照网络中终端设备互联的拓扑结构
  - 星型网、环型网、总线型网、混合型网等；
- 按照传输介质所使用的**访问控制方法**
  - 以太网、FDDI网和令牌网等。
  - 不同类型的局域网采用不同的通信协议。目前广泛使用的是**以太网**，它以**集线器或交换机**为中心构成。

#### 3、无线局域网

##### 无线局域网的概念
- 无线局域网（WLAN）是**以太网**与**无线通信技术**相结合的产物。它借助无线电波进行数据传输，工作原理与有线以太网基本相同。
- 无线局域网最大的优点：能方便地移动计算机的位置或改变网络的组成。
- 无线局域网借助**无线电波进行传输** ，使用的无线电波， 主要是**2.4GHz和5.8GHz**两个频段。*注意单位*
- 无线局域网采用的协议主要是**IEEE 802.1**（俗称**WiFi**）。*包括802.1a、802.1b、802.1g和802.1n等，其中IEEE 802.1n协议已经将传输速率进一步提高到108Mb/s甚至更高*

##### 无线局域网的构建
- 无线局域网需使用**无线网卡**、**无线接入点**等设备构建。无线接入点也被称为“**热点**”它就是一个无线交换机或无线 , 相当于**手机通信中的基站** 。
- 构建无线局域网的另一种技术是**蓝牙**。它是一种**短距离、低速率、低成本**的无线通信技术，其目的是去掉手机、平板电脑等移动终端设备之间以及它们与一些附属装置（如耳机、鼠标等）之间的连接电缆，构成一个操作空间在几m范围内的无线个人区域网络。 

### 考点10 互联网

#### 1、IP协议与路由器
- 要想极大地发挥网络的作用又必须把许多**同构或异构**的网络互相连接起来，这就必须解决诸如计算机**统一编址**、**数据包格式转换**等一系列问题。解决这些问题的途径是使用**TCP/IP协议中的IP协议**（网络互连协议）和**路由器**（router）

##### IP地址
- TCP/IP协议中的IP协议定义了主机的概念，是指任何按照TCP/IP协议连接到网络的终端设备。如PC机、手机、平板电脑，也可以是服务器或网络打印机等其他设备；**所有主机**使用一种**统一格式**的地址（简称IP地址 ）进行**标识**。
-  IP协议第4版（简称IPv4） 规定，每个IP地址使用**4B**(*32个二进制位* ）表示，其中包含有**网络号**和**主机号**两部分。 前者用来指明主机所从属的物理网络的编号（称为网络号），后者是主机在所属物理网络中的编号（称为主机号）。
- 一个IP地址可有4个十进制数来表示，每个十进制数对应IP地址中的一个字节，十进制数之间采用小数点予以分隔， 这种方式被称为**“点分十进制”**；
- 一个 /6 地址可分为**A类、B类、C类**3个基本类。**C类网络地址数量较多**，适用于小规模的局域网络，每个网络最多只能包含**254**台计算机。另有两类分别作为**组播**地址和**备用**地址（D类和E类）。
- IP中地址长度仅为32位，只有**大约36亿个**地址可用。 **2011年年初**国际组织ICANN宣布地址**已全部分配完毕**。 新的**IPv6**协议已经把IP地址的长度扩展到128位，几乎可以不受限制地提供IP地址。 

##### IP数据报
- 互联的各个物理网络，它们使用的数据包（或帧）的格式可能互不兼容，因此不能将一个网络送来的包直接传送给另一个网络。为了**克服这种异构性**，IP协议定义了一种独立于各种物理网的数据包的格式，称为IP数据报。

##### IP数据报的组成
- IP数据报由两部分组成：**头部**和**数据区**
- **头部信息**： 为了确定在网络中进行数据传输的路由，内容包括：
  - *发送*数据报的终端设备的IP地址；
  - *接收*数据报的终端设备的IP地址；
  - IP协议的*版本号*（目前大量使用的还是IPv4）
  - *头部长度*（以32位为单位指出数据报头部的长度〉；
  - *数据报长度*（整个数据报的长度，即头部长度加上数据区的长度）；
  - *服务类型*（指明发送方设备对数据传输的要求，例如，希望以低延迟方式传输，或者以高速率方式传输等）。 
- **数据区**： 数据区的长度可以根据应用而改变，数据量最小的时候也许只有1B（例如传送键盘上输入的一个字母），最大的时候可以达到64KB（包括头部信息在内）。 
- 说明：所有需要在TCP/IP网络中传输的数据在**IP这一层面**都必须**封装或分拆**成**IP数据报**之后才能进行发送或接收。

##### 路由器
- 路由器是遵循IP协议把**异构网络**互相连接起来的**关键设备**，它屏蔽了不同网络的技术差异，能将发送设备的数据**正确送达**接收设备，确保了各种不同物理网络的无缝连接。
- 路由器是一台高性能的**嵌入式计算机系统**，也是一种分组（IP数据报）交换机，其功能主要是**选择路由**和**转发IP数据报**，并进行**协议转换**。
- 路由器有**多个输入端口**和**多个输出端口**， 路由器之间一般都使用**高速通信链路**连接，一个路由器可以有多个IP地址。
- 主要作用：将一个大型网络分割成多个子网络，**避免产生广播风暴**，平衡网络负载，提高网络传输效率。路 由器能监视用户的流量，过滤特定的IP数据报，对保障网络安全也有重要作用。路由器还可以通过优先权控制、 预约网络带宽等措施提供一些网络特殊服务。

#### 2、互联网及其组成

##### 互联网的概念
- 因特网（Internet）指的是在美国ARPA网基础上通过采用TCP/IP协议连接其他计算机网络发展而成的世界上最大的一个互联网络，通常称为“互联网”。
- 互联网使用TCP/IP协议通过路由器将遍布世界各地的计算机网络互联成为一个超级计算机网络。

##### 互联网的组成
- 互联网早先的结构分为三级：**主干网、地区网和校园网**，三级网络覆盖了全美主要的大学和研究所。
- 目前互联网已经逐渐形成了**基于ISP（互联网服务提供商）的多层次结构**。
  - 最高级别的第1层ISP的服务面积最大，一般能覆盖*国家范围*；
  - 第2层ISP和一些*大公司*都是它们的用户；
  -  第3层ISP又称为本地ISP，它们只拥有本地域范围的网络，*普通的校园网*和*企业网*以及*家庭和个人*都是第3层ISP的用户。
- 互联网服务提供商ISP通常拥有自己的通信线路，也拥有从互联网管理机构申请得到的许多IP地址。用户的计算机若要接入互联网，必须获得ISP分配的IP地址。

#### 3、互联网的接入

##### 我国的互联网的接入情况
- 大量的局域网和个人计算机用户需要接人互联网。目前我国中心城市普遍采用的做法是，由**城域网的运营商（**中国电信、中国移动、中国网通等）作为ISP来承担互联网的用户接入任务；
- 城域网的主干是采用**光纤传输**的高速宽带网，它一方面与国家主干网连接，提供城市的宽带IP出口，另一方面又汇聚着若干接入网；单位用户和家庭用户可以通过**电话线、有线电视电缆、光纤、无线信道**等不同技术所组成的接入网接入城域网，再由城域网接入互联网。

##### ADSL接入的概念
- 通过固定电话的本地环路（用户线）接人互联网的技术中，最有效的一种是不对称数字用户线（ADSL）它利用**普通电话线**作为传输介质，只需在线路两端加装ADSL设备（**专用**的ADSL Modem）即可实现数据的高速传输。
- 标准ADSL的数据上传速度一般只有64\~256kb/s最高达1Mb/s，而数据下行速度在理想状态下可以达到8Mb/s（通常情况下为1Mb/s或2Mb/s左右）。有效传输距离一般在**3\~5km**。

##### ADSL接入的特点
1. 一条电话线可同时接听、拨打电话并进行数据传输，两者互不影响。
2. 虽然使用的还是原来的电话线，但ADSL传输的数据并不通过电话交换机，所以ADSL上网**不需要缴付额外的电话费**。
3. ADSL的数据传输速率是根据线路的情况自动调整的，它以“尽力而为”的方式进行数据传输。
4. 它为下行数据流提供比上行数据流更高的传输速率，适应大多数用户的使用要求。 

##### 有线电视网接入
- 有线电视系统已经广泛采用**光纤同轴电缆混合网**（HFC）传输电视节目。HFC主干线部分采用光纤连接到小区，然后在“最后1公里”时使用同轴电缆以树型总线方式接入用户居所。
- HFC具有很大的传输容量，很强的抗电子干扰能力，它融数字与模拟传输技术于一身，既能传输较高质量和较多频 道的广播电视节目，又能提供高速数据传输和信息增值服务，还可以开展交互式数字视频点播服务。
- 主机端仍采用传统的以太局域网技术与**电缆调制解调器**（Cable Modem）连接，后者通过**同轴电缆**接入HFC。Cable Modem的原理是将同轴电缆的整个频带（大约为5~750MHz）划分为三部分，分别用于数据上传、数据下传及电视节目的下传， 数据通信与电视信号的传输互不影响，上网时仍可收看电视节目。

##### 光纤接入
- 光纤接入指的是使用**光纤**作为主要传输介质的互联网接入系统。
- 在ISP的交换局一侧，应把电信号转换为光信号，以便在光纤中传输，到达用户端之后，要使用光网络单元把光信号转换成电信号，然后经过交换机传送到用户的计算机。
- 光纤接入网按照主干系统和配线系统的交界点 光网络单元的安装位置可划分为：光纤到路边（**FTTC**）、光纤到小区（**FTTZ**）、光纤到大楼（**FTTB**）、光纤到家庭（**FTTH**）等几类。

##### 目前采用无线方式接入互联网的主要技术
|         接入技术         |      使用的接入设备      | 数据传输速率 |                         说明                         |
| :----------------------: | :----------------------: | :----------: | :--------------------------------------------------: |
|  无线局域网接入（WLAN）  | WiFi无线网卡，无线接入点 |  11~100Mb/s  |     必须在安装有接入点（AP）的热点区域中才能接入     |
| GPRS移动电话网接入（2.5G） |       GPRS无线网卡       |  56~114kb/s  | 方便，有手机信号的地方就能上网，但速率不高、费用较高 |
|            3G            |        3G无线网卡        |    几Mbps    |                       速率不高                       |
|            4G            |        4G无线网卡        | 100~1000Mbps |                   主流移动通信技术                   |
|            5G            |                          |     Gbps     |                        发展中                        |

<!-- ![image-20210204232536305](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210204232536305.png) -->

## 第二章-嵌入式处理器

### 考纲与考点分析 

#### 嵌入式处理器
1. 嵌入式处理器的结构、特点与分类（不同类型的典型嵌入式处理器及其特点，嵌入式处理器分类）；
2. ARM处理器内核的体系结构（工作状态，工作模式，寄存器组织，异常，数据类型与存储格式等）；
3. 典型ARM处理器内核（ARM9，Cortex-A，Cortex-R，Cortex-M等的技术特点与应用领域）；
4. ARM处理器指令系统及汇编语言程序设计（指令格式，寻址方式，指令集，伪指令，语句格式与程序结构，ARM汇编语言与C的混合编程等）。

#### 考点分析
- 在考试中一般情况下会出现在*选择题和操作题（知识类型为记忆型和理解型相结合，记忆型偏多）*
- 常考知识点有：
  - 嵌入式处理器的结构类型。
  - 典型ARM处理器。
  - ARM处理器的体系结构
  - ARM处理器指令集
  - ARM汇编语言程序设计

### 考点1 嵌入式处理器的结构类型

#### 1、分类方式

##### 嵌入式处理器的结构类型的4种分类方式
1. 按**指令集**划分
   **CISC**（复杂指令集结构）和**RISC**（简单指令集结构）
2. 按**存储机制**划分
   **冯洛伊曼结构**和**哈佛结构**
3. 按指**字长**划分
   **8**位，**16**位，**32**位，**64**位
4. 按**不同内核**划分
   51，AVR，PIC，MSP430，PowerPC，MC68K，ColdFire和ARM

#### 2、CISC处理器和RISC处理器

##### 指令集的概念
- 也称为指令系统，它与程序设计密切相关。内容包括：基本数据类型、寄存器、寻址模式、指令、中断、 异常处理以及外部I/O等，它是**设计处理器的主要依据**，常常被称为**指令集体系结构**或**ISA架构**

##### RISC处理器的特点及应用
- 指令**数目较少**，指令**字长统一**，**格式规整**，**寻址模式较为单纯**，指令**操作简单**，**执行时间短**（*流水线方式*），大多能在**1个周期内**完成。
- 指令系统小，一个时钟周期内可以执行一条或者多条指令，采用标准长度指令，指令格式规范，寻址模式较为简单，存储器访问只是用加载和存储两个指令，采用硬布线逻辑控制为主。
- 目前常见的RISC处理器包括：ARC、**ARM**、AVR、**MIPS**、PA-RISC、Power-PC和SPARC等

##### CISC处理器的特点
- 指令集中指令**数目很多**且**结构比较复杂**，它包含许多很少使用的专用指令，不同指令的**长度并不相等**，执行**时间也长短不一**。CISC处理器结构复杂，功耗较大。
- 目前常见的CISC处理器包括VAX、PDP-11、**intel X86**等。

#### 3、冯洛伊曼存储结构和哈佛结构

##### 冯洛伊曼存储结构和哈佛结构图示
![image-20210209221444168](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210209221444168.png)

##### 冯洛伊曼存储结构和哈佛结构的不同之处
1. CPU连接程序存储器与数据存储器的方式不同
2. 与冯洛伊曼结构相比，哈佛结构的特点如下：
   - 使用*两个独立的存储器*分别存储指令和数据，不允许指令和数据并存
   - 使用*独立的两条总线*，分别作为CPU与每个存储器之间的专用通信路径，而这两条总线之间毫无关联

### 考点2 嵌入式处理器简介

##### 不同典型嵌入式处理器简介
<!-- | 内核系列 |      推出公司      |         内核结构         |                           简单描述                           |
| :------: | :----------------: | :----------------------: | :----------------------------------------------------------: |
|    51    |       Intel        |    CISC<br />哈佛结构    | 8位字长，常用于简单的检测与控制应用领域，最早被称为单片机。其价格低，应用资料全，开发工具便宜， 开发周期短，开发成本低，因此被广泛应用到各个行业。随着1T（单周期）改进型51内核的推出，加上许多器件厂家增加了自己的特色组件，因此51系列仍在生产和使用 |
|   AVR    |       Atmel        |    RISC<br />哈佛结构    | 8位、16位和32位三类字长的微控制器内核，以适应不同应用层次的要求。**AVR主要特点是高性能、高速度、低功耗** |
|   PIC    |     Microchip      |    RISC<br />哈佛结构    | 8位、16位和32位三类不同字长的RISC微控制器内核，以适应不同层次的应用要求。基于pic内核的芯片非常多，每个领域都有多款PIC芯片，主要针对工业控制应用领域，应用最广的是电机控制、汽 车电子等抗干扰要求比较高的场合。pic的主要优势是针对性强，特别是抗干扰能力强 |
|  MSP430  |         TI         |    RISC<br />哈佛结构    | 16位字长的微控制器内核，既集成了数字电路，也集成了模拟电路。广泛应用于手持设备嵌入式应用系统 中，突出特点就是以超低功耗著称全球 |
|   MIPS   |        MIPS        |  RISC<br />冯洛伊曼结构  | 高性能、高档次32位（MIPS32）和64位（MIPS64）处理器内核，主要特点是适应于高速、大数据吞吐量应用场合。中国科学院计算技术研究所的龙芯芯片已获得MIPS处理器IP的全部专利和总线、指令集的授权 |
| PowerPC  | Apple,IBM,Motorola |    RISC<br />哈佛结构    | PowerPC是含有32位子集的64位高性能处理器内核。具有优异的性能、较低的能耗以及较低的散热量。有32个（32位或64位）GPR（通用寄存器）以及各种其他寄存器。有些PowerPC CPU还有32个64位FPR（浮点寄存器）。所有PowerPC（包括64位实现）都使用定长的32位指令 |
|  MC68K   | Motorola,Freescale |    RISC<br />哈佛结构    | 32位字长的处理器内核，具有超标量的超级指令流水线，性能优势明显，主要应用在高端嵌入式应用领域 |
| ColdFire |     Freescale      |    RISC<br />哈佛结构    | 32位的高性能微控制器内核。其性能优越，集成度高，可应用于工业控制领域、消费电子领域、医疗电子领域、测试与测量领域等 |
|   ARM    |        ARM         | RISC<br />多数为哈佛结构 | 除64位Cortex-A外，均为32位结构的嵌入式处理器内核。它是目前嵌入式处理器的领跑者，是最具优势的嵌入式处理器内核。从低端到高端，应用非常广泛，是全球应用最广、 知名度最高、使用厂家最多的嵌入式处理器内核 | -->

![image-20210209222611878](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210209222611878.png)

### 考点3 ARM处理器概述

#### 1、ARM处理器的主要特点

##### ARM处理器的主要特点
- 主流ARM为32位处理器。
- 与其他处理器相比，主要特点有**耗电省**、**功能强**、**成本低**、**32位和16位指令集并存**，它具有众多的合作伙伴，使用面非常广泛，是其他处理器所不及的。

##### ARM具有的技术特征
- **单周期操作**；*一个周期完成一条指令*
- 只使用**加载/存储（Load/Store）**指令访问内存；
- 指令**长度固定**；*RISC处理器指令集特点*
- **三地址**指令格式；
- 指令**流水线技术**；
- **低功耗**设计。

#### 2、ARM处理器架构的发展

##### ARM不同版本ISA架构的比较
![image-20210211144956355](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210211144956355.png)

#### 3、ARM处理器指令集的比较
|    指令集     |                             特点                             |
| :-----------: | :----------------------------------------------------------: |
|   ARM指令集   | 全部是**32位的指令**，其基本指令主要用于进行8位、16位和32位整数的运算，通过扩展的协处理器（最多16个），可以扩充**浮点运算指令**、**DSP指令**、**SIMD指令**等，使处理器的功能大大扩展。 |
|  Thumb指令集  | 从ARMv4T架构开始，几乎所有ARM处理器都支持Thumb指令集。Thumb全部是**16位**的指令，可以看作是Thumb指令的压缩形式。 |
| Thumb-2指令集 | Thumb-2指令集既有**16位**指令又有**32位**指令，是一个**混合的指令集**。它是16位Thumb指令集的超集，功能强大、完备，效率高。 |

### 考点4 典型ARM处理器
- ※理解和区分处理器核（Processor Core）和处理器（Processro）的差异

#### 1、ARM处理器的分类
- ARM处理器分为**五类**：**经典**ARM处理器、 ARM Cortex**嵌入式处理器**、 ARM Cortex**实时嵌入式处理器**、 ARM Cortex**应用处理器**以及ARM**专家处理器**。
- ARM Cortex处理器包括：
  - Cortex-A（Application）系列是**面向高端应用**的处理器，它的工作频率高、性能好、功耗合理。这类被称为ARM Cortex应用处理器，简称**应用处理器**。*A5\~A15为32位，A53\~A57为64位*
  - Cortex-R（Real Time）系列是**面向实时控制应用**的处理器，响应速度快、性能合理、功耗低。这类被称为ARM Cortex实时嵌人式处理器，简称**实时嵌入式处理器**。
  - Cortex-M（Microcontroller）系列是**面向微控制器**的处理器，性价比极高、成本很低、功耗极小。这类被称为ARM Cortex嵌入式处理器，简称**嵌入式处理器**。

#### 2、经典ARM处理器介绍
- 经典ARM处理器目前主要有**ARM7、ARM9和ARM11**三个系列。
- **低端**的ARM7系列的ARM7TDMI（ARM7TDMS-S）是市场上销量最高的32位处理器内核，它采用ARMv4T架构，支持ARM/Thumb指令集，使用**冯氏存储结构**，由**3级指令流水线**实现，曾用于*诺基亚6110手机*。
- ARM9系列处理器，它为**微控制器、DSP和Java应用**提供了单处理器解决方案， **非常适合需要有数字信号处理功能的微控制器应用领域，经典产品为ARM920T**。
  - ARM920T处理器使用的核是ARM9TDMI，它基于**ARMv4T架构**设计，支持ARM/Thumb指令集，具有快速乘法器；采用程序与数据分离的**哈佛存储结构**，指令Cache和数据Cache各16KB，还可通过总线外接Cache和SRAM存储器；支持协处理器；含有内嵌的在线仿真模块ICE、支持片上调试；采用**5级流水线**以提高处理器性能，每一条指令的执行分为5个步骤： **①取指令，②指令译码，③执行指令运算，④ 存储器访问，⑤结果写回寄存器**。

### 考点5 ARM Cortex处理器

#### 1、Cortex-M嵌入式处理器
- Cortex-M系列目前包括Cortex-M0、M0+、M1、M3、M4共5款处理器。Cortex-M处理器都是32位RISC处理器，采用流水线技术，只支持Thumb-2指令集的子集。 
- **CM0和CM0+成本低** 、简单易用，适合成本控制要求高的**中低端应用**；
- **CM3**性能高，通用性好，适合**工业控制及中高端应用**；
- **CM4**具有有效的数字信号控制功能，适合**数字信号处理要求高的应用**。

##### Cortex-M0（CM0）
- ARM Cortex-M0处理器是市场上现有的体积最小、能耗最低的ARM处理器。CM0的处理器核基于ARMv6M架构（是ARMv7M架构的子集），它仅有56条Thumb-2指令，用户很容易掌握，开发比较简单。
- ![image-20210211162009262](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210211162009262.png)
- 说明：以该处理器为内核的MCU和SoC可广泛应用于**医疗**器械、电子测量、照明、**智能控制**、游戏装置、紧凑型电源、**电源和电机控制**、精密模拟系统和无线通信等领域中。

##### Cortex-M3（CM3）
- Cortex-M3是一款**低功耗处理器内核**，具有门数目少、中断延迟短、调试成本低的特点，是为要求有快速中断响应能力的深度嵌入式应用而设计的。
- CM3处理器系列的低功耗、低成本和易于使用的优点相结合，旨在满足专门面向**电动机控制、汽车、电源管 理、嵌入式音频和工业自动化市场**的灵活解决方案。 **支持Thumb-2指令集的子集**，有**硬件除法指令**。
- ![image-20210211162205122](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210211162205122.png)

#### 2、Cortex-R实时嵌入式处理器
- Cortex-**R实时嵌入式处理器**属于**中档**处理器，它提供的性能比Cortex-M系列高得多，而Cortex-A系列则性能更高，专用于需要运行复杂操作系统（需使用虚拟内存管理）的**面向用户**的应用。
- Cortex-R处理器系列目前有Cortex-R4、Cortex-R5和Cortex-R7等品种，它们适用于**计算复杂、实时性要求苛刻**（如汽车电子、硬盘驱动器控制、手机等）的领域。
- Cortex-R处理器主要特点是：**高性能**、**实时处理**、**安全**和**低成本**。
- Cortex-R4的结构组成：
  - 其核心是采用ARMv7R架构的处理器核，它支持ARM/Thumb-2指令集，代码密度高；
  - 使用硬件实现**SIMD**（单指令多数据）的DSP指令；
  - 具有**可选的浮点运算器**（处理器型号为Cortex-R4F）；
  - 使用**8级流水线**技术实现。

#### 3、Cortex-A应用处理器
- Cortex-A应用处理器，该处理器系列适用于有**高计算要求、需运行功能丰富的操作系统以及要求提供交互媒体和图形显示**的应用领域 。例如最新的移动互联网终端（**智能手机**、上网本或智能本等）、汽车电子娱乐系统和下一代数字电视机等。美国Apple公司的*iPhone、iPad、iPod*和韩国三星电子的*Samsung Galaxy*手机等产品所使用的SoC芯片中，大多都采用Cortex-A处理器作为其CPU内核。
- Cortex-A处理器除了**A50系列为64位字长**，采用ARMv8A架构外，**其他均为32位字长**，包括Cortex-A17、A15、A12、A9、A8、A7、A5处理器，它们使用基于ARMv7A架构的处理器核，支持传统的ARM、Thumb指令集和高性能紧凑型Thumb-2EE指令集，具有完全的应用兼容性。
- Cortex-A处理器提供**Java字节码加速执行**的Jazelle技术；提供可信计算的Trust Zone安全扩展；采用最多可达**13级**的深度流水线技术，处理器时钟频率可达2GHz左右。
- Cortex-A处理器可以运行的操作系统和软件平台有：**Android**、Adobe Flash、Java SE、Java FX、Linux、Microsoft Windows Embedded、Symbian和**Ubuntu**等

### 考点6 ARM处理器的工作状态及工作模式

#### 1、ARM处理器的工作状态及其切换

##### ARM处理器的三种工作状态
1. **ARM状态**：ARM状态是ARM处理器工作于**32**位指令的状态，即32位状态，所有指令均为32位宽度
2. **Thumb状态**：Thumb状态是ARM执行**16**位指令的状态，即16位状态。在Thumb模式下，指令代码只有16位，使代码密度变大，占用空间减小，提供比32位程序代码更佳的性能
3. **调试状态**：处理机**停机调试**时进入调试状态
- ①*除Cortex-M*系列处理器外，所有ARM处理器**复位后**开始执行代码时总是**只处于ARM状态**。
- ②Cortex-M处理器因为只有**Thumb-2**指令集，所以只有**Thumb状态和调试状态**两种。 

##### ARM与Thumb间的切换
1. 由ARM状态切换到Thumb状态
   通过BX指令，将操作数寄存器的**最低位设置为1**，即可将ARM状态切换到Thumb状态。如果R0[0]=1则执行BX R0指令，将进入Thumb状态。如果Thumb状态进入异常处理（异常处理要在 **ARM**状态下进行），则**当异常返回**时，将自动切换到Thumb状态。
2. 由Thumb状态切换到ARM状态
   通过BX指令，将操作数寄存器的**最低位设置为0**，即可将Thumb状态切换到ARM状态。如果R0[0]=0则执行BX R0指令，将进入ARM状态。当处理器进行异常处理时，则从异常向量地址开始执行，将自动进入ARM状态。

#### 2、ARM处理器的工作模式
- ![image-20210222155145336](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210222155145336.png)
- ARM处理器工作模式间可以相互转换，但是有条件。
  - 当处理器工作于用户模式时，除非发生异常，否则将不能改变工作模式，当发生异常时，处理器自动改变CPSR[M4:M0]的值，进入相应的工作模式
  - 当处理器工作于系统模式时，用指令向CPSR[M4:M0]写入特定的值，以进入相应的工作模式

### 考点7 ARM状态下的寄存器组织

#### 1、ARM状态下的寄存器组织

##### ARM状态下的寄存器组织
- ARM处理器共有**37**个寄存器，包括**31个通用**寄存器（*含PC*）和**6个状态**寄存器
- 工作于ARM状态下，在物理分配上寄存器被安排成部分*重叠的组*，每种处理器模式使用不同的寄存器

##### ARM处理器工作在不同模式时使用的寄存器的异同点
- 无论何种模式，**R15**均作为PC使用
- **CPSR**为当前程序状态寄存器
- **R7~R0**为公用的通用寄存器
- 不同之处在于：高端7个通用寄存器和状态寄存器在不同模式下不同

##### 不同模式下的寄存器
- ![image-20210222160850590](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210222160850590.png)
- ![image-20210222160953386](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210222160953386.png)
- ![image-20210222161007198](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210222161007198.png)

#### 2、Thumb状态下的寄存器组织
![image-20210222161139572](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210222161139572.png)


### 考点8 ARM处理器的异常
- 在程序正常执行的过程中，每执行一条ARM指令PC值加4，每执行一条Thumb指令PC值加2，通常指令按顺序正常执行。
- 异常（和中断）是由于内部事件或外部事件引起的请求，使处理器去做相应处理的事件。当发生异常时，系统执行完当前指令后，跳转到相应的异常处理程序入口执行异常处理， 异常处理完毕后程序返回。

#### 1、ARM异常种类、异常向量表及优先级
![image-20210303230715341](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210303230715341.png)
- 异常向量的地址由**32位地址空间**的低端正常地址范围0x00000000~0x0000001F决定。ARM处理器片内其他硬件组件的中断使用IRQ或FIQ
- 由上表可以看出，7种类型的异常分为6级，级别最高的是复位，最低的是未定义的指令UND或软件中断SWI。其中UND和SWI异常（包括协处理器不存在异常）是互斥的，不可能同时发生，因此优先级是最高的，并不矛盾
- 复位异常的优先级最高，因此在任何情况下只要进入复位状态，系统便无条件地将PC指向0x00000000处，去执行系统的第一条指令。通常此处放一条无条件的转移指令，转移到系统初始化程序处

#### 2、ARM异常的中断响应过程
![image-20210303231509438](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210303231509438.png)

#### 3、从异常处理程序中返回
![image-20210303231529490](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210303231529490.png)

### 考点9 ARM的存储器格式及数据类型

#### 1、ARM的两种存储字的格式
- ARM体系结构可以用两种方法存储数据字，称之为**大端模式和小端模式**。

##### 大端模式
![image-20210304185922025](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210304185922025.png)

##### 小端模式
![image-20210304190044087](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210304190044087.png)

#### 2、ARM存储器的数据类型
- ARM体系结构将存储器看作是从0x00000000地址开始的**以字节为单位**的线性阵列。每个数据字32位，占**4个字节**的地址空间。作为32位的处理器，ARM体系结构所支持的最大寻址空间为4GB(2<sup>32</sup>B)，但具体的ARM芯片不一定提供最大的地址空间
- 除Cortex-A5外，32位ARM处理器中支持**字节**(8位)、**半字**(16位)、**字**(32位)3种数据类型，其中字需要**4字节对齐**（地址的低两位为0），半字需要**2字节对齐**（地址的最低位为0）。其中每一种又支持**有符号数和无符号数**，因此认为共有6种数据类型
- ARM还支持其他类型的数据，如**浮点数**等数据类型

### 考点10 ARM处理器中的MMU和MPU

#### 1、ARM处理器中的MMU（存储器管理单元）

##### MMU的功能
- **虚拟地址到物理地址的映射**
  - ARM中MMU功能可以被“禁止”或“使能”。当“使能”MMU后，ARM处理器产生的地址是虚拟地址
  - MMU的功能就是进行虚拟地址到物理地址的转换，这需要通过**查找页表**来完成。页表是一张虚拟地址与物理地址的对应表，页表存储在内存储器中
- **存储器访问权限控制**
  - 存储器的访问权限可以以**块（页）**为单位进行设置，分为不可访问、只读、可读写等不同的权限
  - 当访问具有不可访问权限的页时，会产生一个存储器异常的信号通知ARM处理器

##### 存储器访问的顺序
- 当执行加载/存储指令要访问存储器时，**MMU先查找TLB中的转换表**
  - 如果TLB中没有，则硬件会**自动査找主存储器内的页表**，找到*虚拟地址到物理地址的转换信息和访问权限信息*就可以用来进行存储器的读写操作
  - 同时**把这些信息放入TLB中**供此后继续使用
    - 如果在页表中也找不到转换信息，则**产生中断，通知OS进行处理**

#### 2、ARM处理器中的MPU（存储器保护单元）
- MPU是对存储器进行保护的可选组件。它提供了**简单替代MMU**的方法来管理存储器，没有MMU，就不需要进行复杂的地址转换操作
- MPU允许ARM处理器的4GB地址空间定义8对域，分别控制8个指令和8个数据内存区域
- 每个域的首地址和界（或长度）均可编程
- MPU中一个区域就是一些属值及其对应的一片内存。这些属性包括起始地址、长度、读写权限以及缓存等。
- 带MPU的ARM处理器使用不同的域来管理和控制指令内存和数据内存
- 域和域可以重叠并且可以设置不同的优先级

### 考点11 ARM指令分类及指令格式

#### 1、ARM指令分类
- ARM微处理器的指令集可以分为分支指令、数据处理指令、程序状态寄存器指令、加载/存储指令、协处理器指令和异常产生指令六大类
- ![image-20210307212423720](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210307212423720.png)

#### 2、ARM指令格式

##### 指令一般格式
<code>\<opcode>{\<cond>}{S} \<Rd>,\<Rn>{,\<op2>}</code>
- 其中<>不可省，{}可省略，opcode、cond与S之间没有分隔符，{S}与Rd之间用空格隔开
- <opcode>：**指令的操作码**；助记符
- <cond>：**条件域**，满足条件才执行；可省略
- {S}：指令执行时**是否更新CPSR**；可省略
- Rd：**目的寄存器**；任意通用寄存器
- Rn：**第一个操作数**；任意通用寄存器，可与Rd相同
- op2：**第二个操作数**；可为imm8m、寄存器Rm及任意移位寄存器
- 关于#imm8m的说明
  - 对于ARM指令集，#imm8m表示一个由8位立即数经循环右移任意偶数次形成的32位操作数
  - 对于Thumb指令集，#imm8m表示一个由8位立即数经左移任意次形成的32位操作数

##### 指令的条件域
- 每一条ARM指令包含4位的条件码，位于指令的最高4位[31:28]
- 条件码一共有2<sup>4</sup>种，每种条件码可用两个字符表示，这两个字符可以添加在助记符后面与指令同时使用。如"REQ"可代表"相等则跳转"
- ![image-20210307214425836](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210307214425836.png)

#### 3、ARM指令中操作数符号
1. "#"：**立即数符号**；其后是十进制数或者十六进制数
2. "0x"：**十六进制符号**；其后数据每位可以是0\~9、A\~F
3. "!"：**更新基址寄存器符号**；表示指令在完成操作后最后的地址应该写入基址寄存器中
4. "^"：**复制SPSR到CPSR符号**；用于表示批量数据存储指令中放在寄存器之后作为后缀
   1. 当其前面的寄存器不包含PC时，该符号表示所用的寄存器是用户模式的寄存器
   2. 当其前面的寄存器包含PC时，该符号表示将SPSR寄存器的值复制到CPSR寄存器中
5. "-"：**表示寄存器列表范围符号**；表示多个连续寄存器

#### 4、ARM指令中的移位操作

##### 移位操作格式
<code>Rm,\<opsh>#\<shift></code>
- Rm：要移位的通用寄存器
- \<opsh>：移位操作符；LSL(逻辑左移)、LSR(逻辑右移)、ASL(算数左移)、ASR(算术右移)、ROR(循环右移)、RRX(带扩展的循环右移)
- \<shift>：移位次数（0~32）

##### 移位操作及示例
![image-20210307215920906](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210307215920906.png)

### 考点12 ARM指令的寻址方式

#### 1、立即寻址
```Assembly
MOV R0,#0x11	;R0 = 0x11
ADC R0,R0,#99	;R0 ← R0+99+C
```
- 第二个源操作数即为立即数，要求以"#"为前缀，对于十六进制表示的立即数，还要求在"#"后加上"0x"，不加"0x"表示十进制数

#### 2、寄存器寻址
```Assembly
ADD R0,R1,R2	;R0 ← R1+R2
```
- 利用寄存器中的数值作为操作数

#### 3、寄存器间接寻址
```Assembly
TDR R5,[R4]		;R5 ← [R4],间接寻址的寄存器是R4
STR R1,[R2]		;[R2] ← R1,间接寻址的寄存器是R2
```
- 以寄存器中的值作为操作数地址，而操作数本身放在存储器中。用于间接寻址的寄存器必须用"[]"括起来

#### 4、基址加变址寻址
```Assembly
LDR R0,[R1,#3]		;R0 ← [R1+3]		
STR R1,[R2,#6]		;[R2+6] ← R1
LDR R0,[R1,#3]!		;R0 ← [R1+3]、R1 ← R1+3
LDR R0,[R1],#3		;R0 ← [R1]、R1 ← R1+3
LDR R0,[R1,R2]		;R0 ← [R1+R2]
STR R0,[R1,R2]		;[R1+R2] ← R0
```
- 将寄存器（该寄存器一般称作基址寄存器）的内容与指令中给出的地址偏移量相加，从而得到一个操作数的有效地址。变址寻址方式常用于访问某基地址附近的地址单元。

#### 5、相对寻址(跳转指令)
```assembly
	BL Subrouhtine_A;	 ;跳转到子程序Subrouhtine_A处执行
Subrouhtine_A
	MOV PC,LR;			;从子程序返回
```
- 与基址变址寻址方式相类似，相对寻址以程序计数器PC的当前值为基地址，指令中的地址标号作为偏移量，将两者相加之后得到操作数的有效地址。

#### 6、堆栈寻址（程序调用）
- **满递增堆栈**：堆找指针指向最后压入的数据，且由低地址向高地址生成
- **满递减堆栈**：堆栈指针指向最后压人的数据，且由高地址向低地址生成
- **空递增堆栈**：堆栈指针指向下一个将要放入数据的空位置，且由低地址向高地址生成
- **空递减堆找**：堆找指针指向下一个将要放人数据的空位置，且由高地址向低地址生成

#### 7、块拷贝寻址
```assembly
LDMIA R0,[R1,R2,R5,R9]	;R1 ← [R0]、R2 ← [R0+4]、R5 ← [R0+8]、R9 ← [R0+12]
```
- 块拷贝寻址又称多寄存器寻址，采用多寄存器寻址方式，一条指令可以完成多个寄存器值的传送。
- 这种寻址方式可以用一条指令完成传送最多16个通用寄存器的值。

### 考点13 ARM指令集

#### 1、数据处理类指令

##### 数据处理类指令
- 可分为数据传送指令、算术逻辑运算指令、比较指令
- ![image-20210307223839630](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210307223839630.png)

##### ARM指令集示例
- 
```assembly
  ;数据传送指令
  MOV R1,R0		;将寄存器R0的值传送到寄存器R1
  MOV R1,R0,LSL#2	;将寄存器R0的值左移2位后传送到寄存器R1
  ```
- 
```assembly
  ;比较指令
  CMP R1,R0	;将寄存器R1的值与寄存器R0的值相减，并根据结果设置CPSR的标志位
  CMP R1,#85	;将寄存器R1的值与立即数85相减，并根据结果设置CPSR的标志位
  ```
- 
```assembly
  ;位测试指令
  TST R1,#0x01	;用于测试在寄存器R1中是否设置了最低位
  TST R1,#0xFE	;将寄存器R1的值与立即数0xFE按位与，并根据结果设置CPSR的标志位
  ```
- 
```assembly
  ;相等测试指令
  TEQ R1,R2	;将寄存器R1的值与寄存器R2的值按位异或，并根据结果设置CPSR的标志位
  ```
- 
```assembly
  ;加法指令
  ADD R0,R1,R2	 	;R0 = R1+R2
  ADD R0,R1,#256	 	;R0 = R1+256
  ADD R0,R2,R3,LSL#2	;R0 = R2+(R3<<1)
  ADCS R5,R6,R7	 	;R5 = R6+R7+C,且更新CPSR状态
  ```


#### 2、程序状态寄存器访问指令

##### MRS - 程序状态寄存器到通用寄存器的数据传输指令
- 格式：<code>MRS{cond} Rd,\<PSR></code>
  - PSR可以是CPSR或SPSR
- 用途：MSR指令主要用于将程序状态寄存器的内容传送到通用寄存器中
- 使用情况：
  - 当**需要改变程序状态寄存器的内容**时，可用MSR将程序状态寄存器的内容读入通用寄存器，修改后再写回程序状态寄存器
  - 当在异常处理或进程切换时，**需要保存程序状态寄存器的值**，可先用该指令读出程序状态寄存器的值，然后保存

##### MSR - 通用寄存器到程序状态寄存器的数据传输指令
- 格式：<code>MSR{cond} \<PSR>_\<fields>,Rm</code>
  - PSR可以是CPSR或SPSR，fields为域
- 用途：MRS指令主要用于将操作数的内容传送到程序状态寄存器的特定域中。其中操作数可以为通用寄存器或立即数
- <fields>域用于设置程序状态寄存器中需要操作的位，32位的程序状态寄存器可以分为4个域：
  - PSR[31:24]：条件标志位域，用f表示
  - PSR[23:16]：状态位域，用s表示
  - PSR[15:8]：扩展位域，用x表示
  - PSR[7:0]：制位域，用c表示

#### 3、分支指令

##### B - 转移指令
- 格式：<code>B{cond} Label</code>
  - Label为目标地址
- 用途：B指令是最简单的跳转指令。一旦遇上一个B指令，ARM处理器将立即跳转到给定的目标地址，从那里继续执行

##### BX - 带状态切换的转移指令
- 格式：<code>BX{cond} <Rn></code>
- 用途：BX指令跳转到指令中所指令的由寄存器Rn与0xFFFFFFFE相与后的结果指示的目标地址（即Rn[0]并不作为目标地址，而是作为状态切换位），目标地址处的指令既可以是ARM指令，也可以是Thumb指令

##### BL -  带返回的转移指令
- 格式：<code>BL{cond} Label</code>
- 用途：BL是带返回的跳转指令，在跳转之前，会在寄存器R14中保存PC的当前值

##### BLX -  带返回且带状态切换的转移指令
- 格式：<code>BLX目标地址</code>
- 用途：BLX指令从ARM指令集跳转到指令中所指定的目标地址，并将处理器的工作状态由ARM状态钱换到Thumb状态，该指令PC将的当前内容保存到寄存器R14中

#### 4、加载/存储指令

##### 单一数据加载/存储指令
- LDR - 字数据加载指令
  - 指令用于从存储器中将一个32位的字数据传送到目的寄存器中
- LDRB - 字节数据加载指令
  - 指令用于从存储器中将一个8位的字数据传送到目的寄存器中，同时将寄存器的高24位清零
- LDRH - 半字数据加载指令
  - 指令用于从存储器中将一个16位的字数据传送到目的寄存器中，同时将寄存器的高16位清零
- STR - 字数据存储指令
  - 指令用于从源寄存器中将一个32位的字数据传送到存储器中。
- STRB - 字数据存储指令
  - 指令用于从源寄存器中将一个8位的字数据传送到存储器中。
- STRH - 字数据存储指令
  - 指令用于从源寄存器中将一个16位的字数据传送到存储器中。

##### 批量数据加载/存储指令
- LDM - 批量数据加载指令
  - 格式：<code>LDM{cond}  mode  Rn{!}, reglist{^}</code>
  - 用途：指令用于将由基址寄存器所指示的一片连续存储器读到寄存器列表所指示的多个寄存器中，该指令的常见用途是将多个寄存器的内容出栈。
- STM - 批量数据存储指令  
  - 格式：<code>STM{cond}  mode  Rn{!}, reglist{^}</code>
  - 用途：指令用于将寄存器列表所指示的多个寄存器的数据存储到由基址寄存器所指示的一片连续存储器中，该指令的常见用途是将多个寄存器的内容入栈。

### 考点14 ARM处理器支持的伪指令

#### 1、ADR伪指令
- 格式：<code>ADR{cond} Rd,expr</code>
- 用途：用于相对偏移地址加载到通用寄存器中

#### 2、LDR伪指令
- 格式：<code>LDR{cond} Rd,= [expr]</code>
- 用途：用于一个32位常数的加载或地址的加载
- 目的：
  - 当用MOV或MNV指令无法加载符合要求的32位立即数时，可用LDR伪指令加载任意32位操作数到寄存器
  - 当需要程序的相对偏移地址或外部地址加载到寄存器时可使用LDR伪指令

#### 3、NOP - 空操作
- 格式：<code>NOP</code>
- 用途：产生所需的ARM无操作代码，用于简单延时，与<code>MOV Rd,Rd</code>等效

### 考点15 ARM汇编器所支持的伪指令

#### 1、 符号定义伪指令
- ![image-20210308124141924](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210308124141924.png)

#### 2、数据定义伪指令
- ![image-20210308124152277](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210308124152277.png)
- 
```assembly
  Str DCB "This is a test!"	;分配一片连续的字节存储单元并初始化str=This is a test!"
  DataTes DCW 1,2,3	;分配3个连续的半字存储单元并初始化位1,2,3
  ```


#### 3、汇编控制伪指令
- ![image-20210308124201271](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210308124201271.png)
- 
```assembly
  ;例1
  GBLL Test
  	IF Test = TRUE
  		指令序列1
  	ELSE
  		指令序列2
      ENDIF
  
  ;例2
  GBLA Counter
  	Counter SETA 3
  		……
  	WHILE Counter < 10
  		指令序列
      WEND
  ```


#### 4、其他伪指令
- ![image-20210308125851443](https://cdn.jsdelivr.net/gh/FengYJ120/CDN-Article/计算机三级嵌入式系统开发技术/image-20210308125851443.png)

### 考点16 ARM汇编语言的s语句格式

#### 1、汇编语言的语句格式
<code>{标号}{指令或伪指令}{;注释}</code>
- 说明：在汇编语言程序设计中，每一条指令的助记符可以全部用大写或者全部用小写，但不允许一条指令中大小写混用

##### 符号必须遵循的约定：
- 符号区分大小写，同名的大小写符号会被编译器认为是两个不同的符号
- 符号在其作用范围内必须唯一
- 自定义的符号名不能与系统的保留字相同
- 符号名不应与指令或伪指令同名

#### 2、在汇编语言程序中的表达式和运算符

##### 运算次序遵循的优先级
- 优先级相同的双目运算符的运算顺序从左往右
- 相邻的单目运算符的运算顺序为从右到左，且单目运算符的优先级高于其他运算符
- 括号运算符的优先级最高

##### 数值表达式及运算符
- **算术**运算符：+、-、*、/、MOD
- **移位**运算符：ROL、ROR、SHL、SHR
- **数值逻辑**运算符：AND、OR、NOT、EOR

##### 逻辑表达式及运算符
- **关系**操作符：=、>、<、>=、<=、/=、<>（注意相等是一个等于号）
- **逻辑**运算符：LAND、LOR、LNOT、LEOR（加上前缀L与数值逻辑运算符区分）

##### 字符串表达式及运算符
- **返回字符串长度**运算符：LEN
- **字节整数转换为字符**运算符：CHR
- **字符串转换**运算符：STR
- **返回左端字符串**运算符：LEFT
- **返回右端字符串**运算符：RIGHT
- **合并字符串**运算符：CC

### 考点17 汇编语言的程序设计举例

#### 1、S3C2410系统引导程序代码

##### 系统引导程序的功能
- 关看门狗定时器，关中断
- 设置CPU速率及时钟频率
- 设置堆栈
- 切换用户模式并初始化用户堆找
- 如果使用DRAM或其他设备，还要设置相关寄存器，初始化这些设备
- 初始化存储空间
- 跳转到C程序入口

##### 启动文件Startup.s及其代码分析
引导程序主要是一个启动代码文件Startup.s

#### 2、顺序程序设计
- 例如，在小端模式下，执行下面START程序后，R0、R1、R2和R3的值以及内存0x30100000~0x30100003中的值是多少？
  ```assembly
  AREA EXAMPLE1,CODE,READONLY
  		ENTRY
  		CODE32
  START LDR R0, =0x12345678			;R0 = 0x12345678
  		LDR R1, =0x30100000			;R1 = 0x30100000
  		LDR R2, =0x87654321			;R2 = 0x87654321	
  		STR R2,[R1]					;[R1] = 0x87654321
  		LDR R3,[R1]					;R3 = 0x87654321
  		AND R3,R3,#0x000000FF		;R3 = 0x00000021
  		ADD R0,R0,R3,LSL#2			;R3 = 0x00000084、R0 = 0x123456FC
  		STR R0,[R1]					;[R1] = 0x123456FC
  		END
  ```


#### 3、分支程序设计
- ARM分支程序结构通常使用分支指令B加上条件执行来实现。

#### 4、循环程序设计
- **循环初始部分**：为开始循环准备必要的条件，如循环次数、循环体需要的初始值等
- **循环体部分**：重复执行的程序代码，其中包括对循环条件修改的程序段
-  **循环控制部分**：判断循环条件是否成立，决定是否继续循环（循环控制部分是编程的**关键和难点**）

##### 由计数控制循环
- 用一个通用寄存器Rn(n=0,1,2,3,4,5,6,7)作为计数器，先给初始值，然后每循环一次减1，直到循环次数为0结束循环，程序结构如下：
  ```assembly
  	MOV Rn,#Counter
  		……
  LPM	
  	SUBS Rn,Rn,#1
  	BCC LPM	
  ```


##### 由条件控制循环
- 从0x30500000开始的内存区域存放着若干字节的BCD码数据，并以0x0D结束。编程对这些数据进行累加和计算，取累加和的前面两个字节放到这个数据结束字符之后的两字节中，并把数据个数写入后一个单元中
  ```assembly
  	AREA EXAMPLE4,CODE,READONLY
  	ENTRY
  	CODE32
  MYADD	　MOV R0,#0
  	MOV R1,#0
  	LDR R2, =0x30500000
  LOPPA	LDRB R3,[R2]
  	CMP R3,#0x0D
  	BNE LOPPOUT
  	ADD R1,R1,R3
  	ADD R2,R2,#1
  	ADD R0,R0,#1
  	B LOPPA
  LOPPOUT	STRH R1,[R2]
  	STR R0,[R2+2]
  	END
  ```


#### 5、子程序设计
- 在ARM汇编语言程序中，子程序的调用一般是通过BL指令来实现的。在程序中，使用指令：<code>BL 子程序名</code>即可完成程序的调用

#### 6、多段程序设计
- 前面的例子均只釆用一个代码段，实际应用中还可以定义多个数据段。

## 第三章-嵌入式系统硬件组成

### 考点1 嵌入式最小硬件系统

### 考点2 基于ARM内核的典型嵌入式应用系统硬件组成

### 考点3 ARM的AMBA总线体系结构及标准

### 考点4 基于ARM内核的嵌入式芯片的硬件组成

### 考点5 常用ARM嵌入式处理芯片

### 考点6 嵌入式系统芯片的选型

### 考点7 存储器层次结构

### 考点8 存储器分类

### 考点9 存储器主要性能指标

### 考点10 片内存储器

### 考点11 片外存储器

### 考点12 外部辅助设备

### 考点13 通用IO接口GPIO

### 考点14 集成电脑互联总线接口I<sup>2</sup>C

### 考点15 串行外设接口SPI

### 考点16 串行异步通信接口UART3

### 考点17 通用串行总线USB

### 考点18 高清多媒体接口HDMI

### 考点19 常用简单输入设备

### 考点20 常用简单输出设备

### 考点21 S3C2410,S3C2440芯片的内部结构

### 考点22 S3C2410的时钟及电源管理组件

### 考点23 S3C2410 的中断控制器及中断控制

### 考点24 S3C2410的实时时钟RTC

### 考点25 S3C2410的通用IO结构GPIO

### 考点26 S3C2410串行通信接口UART

### 考点27 S3C2410的I<sup>2</sup>C总线接口

### 考点28 S3C2410的看门狗定时器

### 考点29 基于UART的RS-232,485接口

### 考点30 CAN总线接口

### 考点31 以太网通信接口

### 考点32 常用无线通信接口

## 第四章-嵌入式系统软件

### 考点1 嵌入式系统的软件组成

### 考点2 硬件抽象层与板级支持包

### 考点3 引导加载程序

### 考点4 设备驱动程序的概念

### 考点5 实时系统与实时操作系统

### 考点6 嵌入式操作系统概述

### 考点7 Linux内核

### 考点8 嵌入式Linux操作系统

### 考点9 Android操作系统

### 考点10 IOS操作系统

### 考点11 uC,OS-II操作系统特点

### 考点12 uC,OS-II任务及其管理

### 考点13 uC,OS-II的系统服务

### 考点14 uC,OS-II应用程序设计

## 第五章-嵌入式系统开发

### 考点1 开发嵌入式系统的基础知识

### 考点2 嵌入式系统的开发平台与工具

### 考点3 嵌入式系统的调试

### 考点4 ADS1.2工具软件

### 考点5 RVDS

### 考点6 GNU

### 考点7 Web服务器

